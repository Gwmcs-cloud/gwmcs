// Gallery data - replace with your actual image data
const galleryData = [
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/fooodds.jpg?updatedAt=1764190334996",
        category: "meetings",
        title: "Monthly General Meeting",
        description: "Members gather to discuss cooperative affairs, savings progress, and future plans",
        meta: [
            { icon: "fas fa-users", text: "150+ Members" },
            { icon: "fas fa-map-marker-alt", text: "Owerri, Imo State" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/cro.jpg?updatedAt=1764190305324",
        category: "trainings",
        title: "Financial Literacy Workshop",
        description: "Empowering members with essential money management skills",
        meta: [
            { icon: "fas fa-user", text: "Expert Facilitators" },
            { icon: "fas fa-map-marker-alt", text: "Cooperative Hall" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/8.jpg?updatedAt=1764190302822",
        category: "celebrations",
        title: "International Women's Day",
        description: "Celebrating the achievements and potential of our women members",
        meta: [
            { icon: "fas fa-calendar", text: "March 8th" },
            { icon: "fas fa-users", text: "All Members" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/ff418a0e-724a-4c74-952a-9a2a59d6b7f1.jpg?updatedAt=1764190260135",
        category: "community",
        title: "Community Empowerment Program",
        description: "Extending our impact beyond membership to support local communities",
        meta: [
            { icon: "fas fa-user", text: "Outreach Team" },
            { icon: "fas fa-map-marker-alt", text: "Rural Communities" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/74.jpg?updatedAt=1764190300513",
        category: "meetings",
        title: "Executive Committee Session",
        description: "Strategic planning and decision-making for cooperative development",
        meta: [
            { icon: "fas fa-users", text: "Committee Members" },
            { icon: "fas fa-map-marker-alt", text: "Headquarters" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/14.jpg?updatedAt=1764190284861",
        category: "trainings",
        title: "Leadership Development Program",
        description: "Nurturing the next generation of women leaders in our cooperative",
        meta: [
            { icon: "fas fa-user", text: "Emerging Leaders" },
            { icon: "fas fa-map-marker-alt", text: "Training Center" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/77.jpg?updatedAt=1764190300265",
        category: "celebrations",
        title: "Cooperative Anniversary",
        description: "Celebrating years of growth, empowerment, and sisterhood",
        meta: [
            { icon: "fas fa-birthday-cake", text: "Annual Event" },
            { icon: "fas fa-users", text: "All Members & Families" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/d47ba4ca-bb2c-4922-a6c9-7948d0a2ac27.jpg?updatedAt=1764190261552",
        category: "community",
        title: "Youth Mentorship Program",
        description: "Guiding the next generation toward financial literacy and entrepreneurship",
        meta: [
            { icon: "fas fa-user-graduate", text: "Young Participants" },
            { icon: "fas fa-map-marker-alt", text: "Community Center" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/90.jpg?updatedAt=1764190301711",
        category: "meetings",
        title: "Annual Dividend Distribution",
        description: "Celebrating our collective success and sharing profits with members",
        meta: [
            { icon: "fas fa-hand-holding-usd", text: "Profit Sharing" },
            { icon: "fas fa-users", text: "All Active Members" }
        ]
    },
     {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/fl.jpg?updatedAt=1764190335023",
        category: "meetings",
        title: "Annual Dividend Distribution",
        description: "Celebrating our collective success and sharing profits with members",
        meta: [
            { icon: "fas fa-hand-holding-usd", text: "Profit Sharing" },
            { icon: "fas fa-users", text: "All Active Members" }
        ]
    },
     {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/w.jpg?updatedAt=1764190343094",
        category: "meetings",
        title: "Annual Dividend Distribution",
        description: "Celebrating our collective success and sharing profits with members",
        meta: [
            { icon: "fas fa-hand-holding-usd", text: "Profit Sharing" },
            { icon: "fas fa-users", text: "All Active Members" }
        ]
    },
     {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/89.jpg?updatedAt=1764190302116",
        category: "meetings",
        title: "Annual Dividend Distribution",
        description: "Celebrating our collective success and sharing profits with members",
        meta: [
            { icon: "fas fa-hand-holding-usd", text: "Profit Sharing" },
            { icon: "fas fa-users", text: "All Active Members" }
        ]
    },
     {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/78.jpg?updatedAt=1764190302121",
        category: "meetings",
        title: "Annual Dividend Distribution",
        description: "Celebrating our collective success and sharing profits with members",
        meta: [
            { icon: "fas fa-hand-holding-usd", text: "Profit Sharing" },
            { icon: "fas fa-users", text: "All Active Members" }
        ]
    },
     {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/chimaa.jpg?updatedAt=1764190304900",
        category: "meetings",
        title: "Annual Dividend Distribution",
        description: "Celebrating our collective success and sharing profits with members",
        meta: [
            { icon: "fas fa-hand-holding-usd", text: "Profit Sharing" },
            { icon: "fas fa-users", text: "All Active Members" }
        ]
    },
     {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/crowd.jpg?updatedAt=1764190307237",
        category: "meetings",
        title: "Annual Dividend Distribution",
        description: "Celebrating our collective success and sharing profits with members",
        meta: [
            { icon: "fas fa-hand-holding-usd", text: "Profit Sharing" },
            { icon: "fas fa-users", text: "All Active Members" }
        ]
    },
    {
        src: "https://ik.imagekit.io/69oeofiuq/GWMCS/gwmcs%20images/program/Untitled.jpg?updatedAt=1764190342884",
        category: "trainings",
        title: "Business Skills Workshop",
        description: "Developing entrepreneurial skills for sustainable business growth",
        meta: [
            { icon: "fas fa-user", text: "Business Experts" },
            { icon: "fas fa-map-marker-alt", text: "Training Hall" }
        ]
    }
];

class PinterestGallery {
    constructor() {
        this.grid = document.getElementById('pinterestGrid');
        this.filterButtons = document.querySelectorAll('.filter-btn');
        this.currentFilter = 'all';
        this.columns = 3;
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.createColumns();
        this.loadImages();
        this.setupFiltering();
    }

    setupEventListeners() {
        window.addEventListener('resize', () => {
            this.adjustColumns();
        });
    }

    adjustColumns() {
        const width = window.innerWidth;
        if (width < 768) {
            this.columns = 1;
        } else if (width < 1200) {
            this.columns = 2;
        } else {
            this.columns = 3;
        }
        this.createColumns();
        this.loadImages();
    }

    createColumns() {
        this.grid.innerHTML = '';
        for (let i = 0; i < this.columns; i++) {
            const column = document.createElement('div');
            column.className = 'pinterest-column';
            column.dataset.column = i;
            this.grid.appendChild(column);
        }
    }

    loadImages() {
        // Clear existing images
        document.querySelectorAll('.pinterest-column').forEach(column => {
            column.innerHTML = '';
        });

        // Filter images based on current filter
        const filteredImages = this.currentFilter === 'all' 
            ? galleryData 
            : galleryData.filter(item => item.category === this.currentFilter);

        // Load images and place them in columns
        filteredImages.forEach((item, index) => {
            const columnIndex = index % this.columns;
            const column = document.querySelector(`.pinterest-column[data-column="${columnIndex}"]`);
            
            const galleryItem = this.createGalleryItem(item);
            column.appendChild(galleryItem);
        });
    }

    createGalleryItem(item) {
        const galleryItem = document.createElement('div');
        galleryItem.className = `gallery-item ${item.category}`;
        galleryItem.dataset.category = item.category;

        galleryItem.innerHTML = `
            <div class="gallery-image">
                <img src="${item.src}" alt="${item.title}" loading="lazy">
                <div class="image-overlay">
                    <div class="overlay-content">
                        <h4>${item.title}</h4>
                        <p>${item.description}</p>
                        <div class="item-meta">
                            ${item.meta.map(metaItem => 
                                `<span><i class="${metaItem.icon}"></i> ${metaItem.text}</span>`
                            ).join('')}
                        </div>
                    </div>
                </div>
            </div>
        `;

        // Load image and maintain aspect ratio
        this.loadImageWithAspectRatio(galleryItem, item.src);

        return galleryItem;
    }

    loadImageWithAspectRatio(galleryItem, src) {
        const img = new Image();
        img.onload = function() {
            // The image will naturally maintain its aspect ratio
            // CSS handles the responsive sizing
        };
        img.src = src;
    }

    setupFiltering() {
        this.filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update active button
                this.filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Update filter and reload images
                this.currentFilter = button.dataset.filter;
                this.loadImages();
            });
        });
    }
    
    loadImages() {
    // Clear existing images
    document.querySelectorAll('.pinterest-column').forEach(column => {
        column.innerHTML = '';
    });

    // Filter images based on current filter
    let filteredImages = this.currentFilter === 'all' 
        ? galleryData 
        : galleryData.filter(item => item.category === this.currentFilter);

    // Limit images for "all" filter only
    if (this.currentFilter === 'all') {
        const imageLimit = 12; // Change this number to your desired limit
        filteredImages = filteredImages.slice(0, imageLimit);
    }

    // Load images and place them in columns
    filteredImages.forEach((item, index) => {
        const columnIndex = index % this.columns;
        const column = document.querySelector(`.pinterest-column[data-column="${columnIndex}"]`);
        
        const galleryItem = this.createGalleryItem(item);
        column.appendChild(galleryItem);
    });
}
}


// Initialize the gallery when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    new PinterestGallery();
});